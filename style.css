const loginPage = document.getElementById('login-page');
const contentPage = document.getElementById('content-page');
const passwordInput = document.getElementById('password');
const enterBtn = document.getElementById('enter-btn');
const backBtn = document.getElementById('back-btn');
const errorMsg = document.getElementById('error-msg');

const SECRET_KEY = "mayapapaya";

function checkPassword() {
    const value = passwordInput.value;

    if (value === SECRET_KEY) {
        // Fade out login, Show content
        loginPage.style.opacity = '0';
        setTimeout(() => {
            loginPage.classList.add('hidden');
            contentPage.classList.remove('hidden');
        }, 400); // Wait for fade out
    } else {
        triggerShake();
    }
}

function triggerShake() {
    // Add shake class to the input wrapper or input itself
    passwordInput.parentElement.classList.add('shake');
    errorMsg.classList.add('visible');
    
    // Remove shake class after animation
    setTimeout(() => {
        passwordInput.parentElement.classList.remove('shake');
        passwordInput.value = '';
    }, 500);

    // Hide error message after 2 seconds
    setTimeout(() => {
        errorMsg.classList.remove('visible');
    }, 2000);
}

// Event Listeners
enterBtn.addEventListener('click', checkPassword);

passwordInput.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') checkPassword();
});

backBtn.addEventListener('click', () => {
    contentPage.classList.add('hidden');
    loginPage.classList.remove('hidden');
    
    // Reset login page state
    setTimeout(() => {
        loginPage.style.opacity = '1';
    }, 10);
    
    passwordInput.value = '';
    errorMsg.classList.remove('visible'); // Ensure error is gone
    passwordInput.focus();
});
